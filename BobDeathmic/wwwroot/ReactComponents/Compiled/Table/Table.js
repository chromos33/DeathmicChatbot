"use strict"; function _instanceof(t, e) { return null != e && "undefined" != typeof Symbol && e[Symbol.hasInstance] ? !!e[Symbol.hasInstance](t) : t instanceof e } function _typeof(t) { return (_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function _classCallCheck(t, e) { if (!_instanceof(t, e)) throw new TypeError("Cannot call a class as a function") } function _defineProperties(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } function _createClass(t, e, n) { return e && _defineProperties(t.prototype, e), n && _defineProperties(t, n), t } function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && _setPrototypeOf(t, e) } function _setPrototypeOf(t, e) { return (_setPrototypeOf = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } function _createSuper(t) { var e = _isNativeReflectConstruct(); return function () { var n, o = _getPrototypeOf(t); if (e) { var r = _getPrototypeOf(this).constructor; n = Reflect.construct(o, arguments, r) } else n = o.apply(this, arguments); return _possibleConstructorReturn(this, n) } } function _possibleConstructorReturn(t, e) { return !e || "object" !== _typeof(e) && "function" != typeof e ? _assertThisInitialized(t) : e } function _assertThisInitialized(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function _isNativeReflectConstruct() { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Date.prototype.toString.call(Reflect.construct(Date, [], function () { })), !0 } catch (t) { return !1 } } function _getPrototypeOf(t) { return (_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } var Table = function (t) { _inherits(n, React.Component); var e = _createSuper(n); function n(t) { var o; return _classCallCheck(this, n), (o = e.call(this, t)).state = { Rows: [], Filter: "", Sort: "init", SortColumn: 0 }, o.Search = o.Search.bind(_assertThisInitialized(o)), o.Sort = o.Sort.bind(_assertThisInitialized(o)), o.handleUpdateEvent = o.handleUpdateEvent.bind(_assertThisInitialized(o)), o } return _createClass(n, [{ key: "handleUpdateEvent", value: function (t) { this.UpdateData() } }, { key: "componentDidMount", value: function () { window.addEventListener("updateTable", this.handleUpdateEvent) } }, { key: "componentWillMount", value: function () { this.UpdateData() } }, { key: "UpdateData", value: function () { var t = this, e = new XMLHttpRequest; e.open("GET", t.props.DataLink, !0), e.onload = function () { t.setState({ Table: JSON.parse(e.responseText) }) }, e.send() } }, { key: "Search", value: function (t) { this.setState({ Filter: t }) } }, { key: "Sort", value: function (t) { var e = ""; switch (this.state.Sort) { case "init": case "desc": e = "asc"; break; case "asc": e = "desc" }this.setState({ SortColumn: t, Sort: e }) } }, { key: "render", value: function () { var t = this; if (void 0 !== this.state.Table && this.state.Table.Rows.length > 0) { var e = 0, n = this, o = this.state.Table.Rows; 0 !== this.state.SortColumn && "init" !== this.state.Sort && o.sort(function (t, e) { var o = n.state.SortColumn - 1; if (t.isStatic || e.isStatic) return 0; if ("desc" === n.state.Sort) { if (t.Columns[o].Text.toLowerCase() > e.Columns[o].Text.toLowerCase()) return -1; if (t.Columns[o].Text.toLowerCase() < e.Columns[o].Text.toLowerCase()) return 1 } else { if (t.Columns[o].Text.toLowerCase() < e.Columns[o].Text.toLowerCase()) return -1; if (t.Columns[o].Text.toLowerCase() > e.Columns[o].Text.toLowerCase()) return 1 } return 0 }); var r = o.map(function (o) { return e++, "" === n.state.Filter ? React.createElement(Row, { ColumnTypes: t.props.Columns, Sort: n.Sort, key: e, Columns: o.Columns }) : !o.canFilter || o.canFilter && o.Filter.toLowerCase().includes(n.state.Filter.toLowerCase()) ? React.createElement(Row, { ColumnTypes: t.props.Columns, Sort: n.Sort, key: e, Columns: o.Columns }) : void 0 }); return React.createElement("div", { className: "relative d-inline-block" }, React.createElement(Search, { callback: this.Search }), React.createElement("table", null, React.createElement("tbody", null, r))) } return React.createElement("span", null, "Loading") } }]), n }();